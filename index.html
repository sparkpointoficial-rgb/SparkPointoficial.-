<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SparkPoint</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        body { background: #0b0b0b; color: white; font-family: sans-serif; margin: 0; padding: 20px; text-align: center; }
        .card { background: #181818; border-radius: 20px; padding: 25px; border: 1px solid #333; margin-bottom: 20px; }
        .btn { background: #f3ba2f; color: black; border: none; padding: 18px; width: 100%; border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; }
        .logo { color: #f3ba2f; font-size: 32px; font-weight: bold; margin-bottom: 10px; }
        .sub-text { color: #888; font-size: 14px; margin-bottom: 30px; }
        
        /* –°—Ç–∏–ª–∏ –∫–∞–±–∏–Ω–µ—Ç–∞ */
        .balance-box { border: 2px solid #f3ba2f; border-radius: 15px; padding: 25px; color: #f3ba2f; font-size: 32px; font-weight: bold; }
        .circle-group { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        .circle { width: 25px; height: 25px; border: 2px solid #f3ba2f; border-radius: 50%; }
        .circle.active { background: #f3ba2f; box-shadow: 0 0 10px #f3ba2f; }
        .ref-box { background: #000; padding: 15px; border-radius: 10px; border: 1px solid #333; color: #f3ba2f; font-size: 12px; word-break: break-all; margin-top: 15px; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="logo">‚ö° SparkPoint</div>
    <div class="sub-text">login browsers Trust Wallet SafePal MetaMask</div>

    <div id="step1" class="card">
        <p style="text-align: left;">–í–∞—à –∫–æ—à–µ–ª–µ–∫: <span id="addr" style="float: right; color: #888;">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span></p>
        <button id="btnConnect" class="btn">–ü–û–î–ö–õ–Æ–ß–ò–¢–¨ –ö–û–®–ï–õ–ï–ö</button>
    </div>

    <div id="step2" class="card hidden">
        <h3 style="text-align: left;">–í—Ö–æ–¥ –≤ –ø—Ä–æ–µ–∫—Ç (–£—Ä–æ–≤–µ–Ω—å 1)</h3>
        <div style="border: 1px dashed #f3ba2f; padding: 15px; border-radius: 10px; margin: 20px 0;">
            –°—Ç–æ–∏–º–æ—Å—Ç—å: <b>$10 USD</b><br>
            <small id="bnbPrice">~ 0.0105 BNB</small>
        </div>
        <p style="text-align: left;">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å: <span style="color: #f3ba2f;">0x0c4F...3D8a</span></p>
        <button id="btnPay" class="btn">–û–ü–õ–ê–¢–ò–¢–¨ –ò –ù–ê–ß–ê–¢–¨</button>
    </div>

    <div id="step3" class="hidden">
        <div class="card">
            <h3 style="text-align: left; color: #888;">üí∞ –¢–í–û–ô –ë–ê–õ–ê–ù–°</h3>
            <div class="balance-box">0.45 BNB</div>
        </div>

        <div class="card">
            <h3 style="text-align: left; color: #888;">üìä –£–†–û–í–ï–ù–¨ 2</h3>
            <div class="circle-group">
                <div class="circle active"></div>
                <div class="circle active"></div>
                <div class="circle active"></div>
                <div class="circle active"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>
        </div>

        <div class="card">
            <h3 style="text-align: left; color: #888;">üîó –í–∞—à–∞ —Å—Å—ã–ª–∫–∞</h3>
            <p style="text-align: left; font-size: 14px;">–î–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å 2 —É—á–∞—Å—Ç–Ω–∏–∫–∞:</p>
            <div id="refLink" class="ref-box"></div>
        </div>
    </div>

    <script>
        let userAddr = "";

        // –®–∞–≥ 1: –ö–æ–Ω–Ω–µ–∫—Ç
        document.getElementById('btnConnect').onclick = async function() {
            if (window.ethereum) {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAddr = accounts[0];
                document.getElementById('addr').innerText = userAddr.substring(0,6) + "..." + userAddr.substring(38);
                document.getElementById('step1').classList.add('hidden');
                document.getElementById('step2').classList.remove('hidden');
            } else {
                alert("–û—Ç–∫—Ä–æ–π –≤ Trust Wallet!");
            }
        };

        // –®–∞–≥ 2: –û–ø–ª–∞—Ç–∞
        document.getElementById('btnPay').onclick = function() {
            // –¢—É—Ç –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–±–∏–Ω–µ—Ç
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
            document.getElementById('refLink').innerText = window.location.href + "?ref=" + userAddr;
        };
    </script>
</body>
</html>
