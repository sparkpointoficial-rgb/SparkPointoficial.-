<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SparkPoint | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π BNB –°–º–∞—Ä—Ç-–ö–æ–Ω—Ç—Ä–∞–∫—Ç</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        :root { --accent: #f3ba2f; --bg: #0b0e11; --card: #1e2329; --text: #eaecef; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; line-height: 1.6; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 40px 0; }
        h1 { color: var(--accent); font-size: 2.5rem; letter-spacing: 2px; margin: 0; }
        .card { background: var(--card); border-radius: 16px; padding: 25px; margin: 20px 0; border: 1px solid #474d57; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
        .btn { background: var(--accent); color: black; padding: 16px 32px; border-radius: 12px; font-weight: bold; border: none; width: 100%; cursor: pointer; font-size: 18px; transition: 0.3s; }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }
        
        /* –°—Ç–∏–ª–∏ –∏–∑ —Ç–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ —Å–∫—Ä–∏–Ω–∞ */
        .balance-box { border: 2px solid var(--accent); border-radius: 12px; padding: 20px; text-align: center; margin-top: 10px; }
        .balance-val { font-size: 32px; color: var(--accent); font-weight: bold; }
        .circle-group { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        .circle { width: 25px; height: 25px; border: 2px solid var(--accent); border-radius: 50%; }
        .circle.active { background: var(--accent); box-shadow: 0 0 10px var(--accent); }
        
        .status-box { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 14px; }
        .price-info { text-align: center; margin: 15px 0; border: 1px dashed var(--accent); padding: 10px; border-radius: 8px; }
        #refLinkDisplay { background: #000; padding: 15px; border-radius: 8px; font-size: 13px; color: var(--accent); margin-top: 10px; word-break: break-all; border: 1px solid #333; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>‚ö° SparkPoint</h1>
        <p style="color: #888; font-size: 14px;">login browsers Trust Wallet SafePal MetaMask</p>
    </header>

    <div class="card" id="connectCard">
        <div class="status-box">
            <span>–í–∞—à –∫–æ—à–µ–ª–µ–∫:</span>
            <span id="walletAddr">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span>
        </div>
        <button id="connectBtn" class="btn">–ü–û–î–ö–õ–Æ–ß–ò–¢–¨ –ö–û–®–ï–õ–ï–ö</button>
    </div>

    <div id="paymentUI" class="hidden">
        <div class="card">
            <h3>–í—Ö–æ–¥ –≤ –ø—Ä–æ–µ–∫—Ç (–£—Ä–æ–≤–µ–Ω—å 1)</h3>
            <div class="price-info">
                –°—Ç–æ–∏–º–æ—Å—Ç—å: <strong>$10 USD</strong><br>
                <small id="bnbPriceDisplay">–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞...</small>
            </div>
            <p>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å: <span id="refAddr" style="color: var(--accent);">0x00...</span></p>
            <button id="registerBtn" class="btn">–û–ü–õ–ê–¢–ò–¢–¨ –ò –ù–ê–ß–ê–¢–¨</button>
        </div>
    </div>

    <div id="dashboardUI" class="hidden">
        <div class="card">
            <h3>üí∞ –¢–í–û–ô –ë–ê–õ–ê–ù–°</h3>
            <div class="balance-box">
                <div class="balance-val">0.45 BNB</div>
            </div>
        </div>

        <div class="card">
            <h3>üìä –£–†–û–í–ï–ù–¨ 2</h3>
            <div class="circle-group">
                <div class="circle active"></div>
                <div class="circle active"></div>
                <div class="circle active"></div>
                <div class="circle active"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>
        </div>

        <div class="card">
            <h3>üîó –í–∞—à–∞ —Å—Å—ã–ª–∫–∞ (–ø—Ä–∏–≥–ª–∞—Å–∏ 2 —É—á–∞—Å—Ç–Ω–∏–∫–∞)</h3>
            <p style="font-size: 14px; color: #888;">–û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–∑—å—è–º –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</p>
            <div id="refLinkDisplay"></div>
        </div>
    </div>
</div>

<script>
    let provider, signer, userAddress;

    const params = new URLSearchParams(window.location.search);
    let referrer = params.get('ref') || "0x0000000000000000000000000000000000000000";

    async function init() {
        if (referrer !== "0x0000000000000000000000000000000000000000") {
            document.getElementById('refAddr').innerText = referrer.substring(0,6) + "..." + referrer.substring(38);
        }
        try {
            const response = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BNBUSDT');
            const data = await response.json();
            const bnbPrice = parseFloat(data.price);
            const bnbAmount = (10 / bnbPrice).toFixed(4);
            document.getElementById('bnbPriceDisplay').innerText = `~ ${bnbAmount} BNB`;
        } catch(e) { console.log("–û—à–∏–±–∫–∞ –∫—É—Ä—Å–∞"); }
    }

    async function connect() {
        if (window.ethereum) {
            provider = new ethers.providers.Web3Provider(window.ethereum);
            await provider.send("eth_requestAccounts", []);
            signer = provider.getSigner();
            userAddress = await signer.getAddress();
            
            document.getElementById('walletAddr').innerText = userAddress.substring(0,6) + "..." + userAddress.substring(38);
            document.getElementById('connectBtn').classList.add('hidden');
            document.getElementById('paymentUI').classList.remove('hidden');
        } else {
            alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª—å–∫–µ!");
        }
    }

    // –ò–º–∏—Ç–∞—Ü–∏—è –æ–ø–ª–∞—Ç—ã –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–∞–±–∏–Ω–µ—Ç–∞
    async function pay() {
        alert("–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞...");
        document.getElementById('paymentUI').classList.add('hidden');
        document.getElementById('dashboardUI').classList.remove('hidden');
        
        const link = window.location.origin + window.location.pathname + "?ref=" + userAddress;
        document.getElementById('refLinkDisplay').innerText = link;
    }

    document.getElementById('connectBtn').onclick = connect;
    document.getElementById('registerBtn').onclick = pay;
    init();
</script>

</body>
</html>
